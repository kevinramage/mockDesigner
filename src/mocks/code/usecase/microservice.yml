name: MicroService
services:

# Product object
- name: GetProduct
  method: GET
  path: /api/v1/command/:cmdId/product/:prdId
  response:
    triggers:
    - type: none
      actions:
      - type: message
        status: 200
        body: OK
- name: GetAllProducts
  method: GET
  path: /api/v1/command/:cmdId/product/
  response:
    triggers:
    - type: none
      actions:
      - type: message
        status: 200
        body: OK
- name: CreateProduct
  method: POST
  path: /api/v1/command/:cmdId/product/
  response:
    triggers:
    - type: none
      actions:
      - type: message
        status: 201
        body: OK
- name: UpdateProduct
  method: PUT
  path: /api/v1/command/:cmdId/product/:prdId
  response:
    triggers:
    - type: none
      actions:
      - type: message
        status: 200
        body: OK
- name: DeleteProduct
  method: DELETE
  path: /api/v1/command/:cmdId/product/:prdId
  response:
    triggers:
    - type: none
      actions:
      - type: message
        status: 204

# Command object
- name: GetCommand
  method: GET
  path: /api/v1/command/:cmdId
  response:
    triggers:
    - type: none
      actions:
      - type: microservice
        action: get
        storage: command
        keys:
        - "{{.request.params.cmdId}}"
- name: GetAllCommand
  method: GET
  path: /api/v1/command
  response:
    triggers:
    - type: none
      actions:
      - type: microservice
        action: getAll
        storage: command
- name: SearchCommandByName
  method: GET
  path: /api/v1/command/searchByName
  response:
    triggers:
    - type: none
      actions:
      - type: microservice
        action: search
        storage: command
        keys:
        - "name"
- name: CreateCommand
  method: POST
  path: /api/v1/command
  response:
    triggers:
    - type: none
      actions:
      - ttpe: microservice
        action: create
        storage: command
        id: "{{Increment(commandCounter)}}"
- name: UpdateCommand
  method: PUT
  path: /api/v1/command/:cmdId
  response:
    triggers:
    - type: none
      actions:
      - type: save
        expressions:
        - key: name
          value: "{{.request.body.name}}"
        - key: description
          value: "{{.request.body.description}}"
        - key: deliveryDate
          value: "{{.request.body.deliveryDate}}"
        storage: command
        keys:
          - "{{.request.params.cmdId}}"
      - type: message
        status: 200
        body: OK
- name: DeleteCommand
  method: DELETE
  path: /api/v1/command/:cmdId
  response:
    triggers:
    - type: none
      actions:
      - type: message
        status: 204